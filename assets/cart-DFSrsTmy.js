import{q as h,k as y,y as c}from"./index-B9zWtJm9.js";import{i as n}from"./request-Bl3HPWDP.js";const w=(t,r)=>n({url:"/member/cart",method:"POST",data:{skuId:t,count:r}}),C=()=>n({url:"/member/cart"}),A=t=>n({url:"/member/cart",method:"DELETE",data:{ids:t}});let L=(t,r)=>n({url:"/member/cart/selected",method:"PUT",data:{selected:t,ids:r}});const F=(t,{count:r,selected:l})=>n({method:"PUT",url:`/member/cart/${t}`,data:{count:r,selected:l}}),S=t=>n({method:"PUT",url:"/member/cart/selected",data:{selected:t}}),k=h("cart",()=>{let t=y([]);async function r(){let e=await C();t.value=e.result}r();async function l(e,a){await w(e,a),r()}async function o(e){await A([e]);let a=t.value.findIndex(u=>u.skuId===e);t.value.splice(a,1)}async function d(e,a){let u=t.value.find(b=>b.skuId===a);u.selected=!u.selected,await L(e,[a])}async function i(e,a){await F(e,{count:a})}let m=c(()=>t.value.every(e=>e.selected));async function f(e){t.value.forEach(a=>a.selected=e),await S(e)}let v=c(()=>t.value.reduce((e,a)=>a.count*a.price,0)),p=c(()=>t.value.reduce((e,a)=>e+a.count,0)),s=c(()=>t.value.filter(e=>e.selected)),P=c(()=>s.value.reduce((e,a)=>e+a.count,0)),I=c(()=>s.value.reduce((e,a)=>e+a.count*a.price,0));return{getCartList:r,carList:t,shanFn:o,jiaFn:l,xuanFn:d,shuFn:i,quan:m,fanFn:f,selectedGoods:s,selectedGoodsLength:P,selectedGoodsPrice:I,zl:p,zj:v}},{persist:!0});export{k as u};
