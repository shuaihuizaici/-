import"./request-Bl3HPWDP.js";import{E as V,a as P}from"./el-tab-pane-D4sdjqSr.js";import{E as M,a as R}from"./el-breadcrumb-item-CsrLH52a.js";import{R as U,S as x,_ as X,s as $,k as _,n as j,c as S,b as C,e as m,w as v,I as z,d as g,F as G,r as K,o as h,f as y,t as F,m as Y}from"./index-B9zWtJm9.js";import{a as q,b as A}from"./fenlei-CfYx8qIv.js";import{X as J}from"./XtxGoogs-CD-RCG8Q.js";import{t as Q}from"./event-BE20p1dL.js";import{g as W}from"./scroll-BNH9li38.js";import{t as B}from"./throttle-DXnv788V.js";import"./index-Ccnra07l.js";import"./vnode-unm24z5M.js";const H=e=>{let n=0,t=e;for(;t;)n+=t.offsetTop,t=t.offsetParent;return n},Z=(e,n)=>Math.abs(H(e)-H(n)),u="ElInfiniteScroll",ee=50,te=200,ne=0,oe={delay:{type:Number,default:te},distance:{type:Number,default:ne},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},N=(e,n)=>Object.entries(oe).reduce((t,[o,l])=>{var r,s;const{type:f,default:i}=l,d=e.getAttribute(`infinite-scroll-${o}`);let c=(s=(r=n[d])!=null?r:d)!=null?s:i;return c=c==="false"?!1:c,c=f(c),t[o]=Number.isNaN(c)?i:c,t},{}),D=e=>{const{observer:n}=e[u];n&&(n.disconnect(),delete e[u].observer)},se=(e,n)=>{const{container:t,containerEl:o,instance:l,observer:r,lastScrollTop:s}=e[u],{disabled:f,distance:i}=N(e,l),{clientHeight:d,scrollHeight:c,scrollTop:a}=o,L=a-s;if(e[u].lastScrollTop=a,r||f||L<0)return;let p=!1;if(t===e)p=c-(d+a)<=i;else{const{clientTop:E,scrollHeight:b}=e,T=Z(e,o);p=a+d>=T+E+b-i}p&&n.call(l)};function I(e,n){const{containerEl:t,instance:o}=e[u],{disabled:l}=N(e,o);l||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?n.call(o):D(e))}const ae={async mounted(e,n){const{instance:t,value:o}=n;U(o)||Q(u,"'v-infinite-scroll' binding value must be a function"),await x();const{delay:l,immediate:r}=N(e,t),s=W(e,!0),f=s===window?document.documentElement:s,i=B(se.bind(null,e,o),l);if(s){if(e[u]={instance:t,container:s,containerEl:f,delay:l,cb:o,onScroll:i,lastScrollTop:f.scrollTop},r){const d=new MutationObserver(B(I.bind(null,e,o),ee));e[u].observer=d,d.observe(e,{childList:!0,subtree:!0}),I(e,o)}s.addEventListener("scroll",i)}},unmounted(e){const{container:n,onScroll:t}=e[u];n==null||n.removeEventListener("scroll",t),D(e)},async updated(e){if(!e[u])await x();else{const{containerEl:n,cb:t,observer:o}=e[u];n.clientHeight&&o&&I(e,t)}}},w=ae;w.install=e=>{e.directive("InfiniteScroll",w)};const le=w,re={class:"fenlei_sub"},ie={class:"container"},ce={class:"mian"},ue=["infinite-scroll-disabled"],de={__name:"index",setup(e){let n=$(),t=_(n.params.id),o=_({});async function l(){let a=await q(t.value);o.value=a.result}let r=_({}),s=_({categoryId:t,page:1,pageSize:20,sortField:"publishTime"});async function f(){let a=await A(s.value);r.value=a.result.items}let i=_(!1);async function d(){s.value.page++;let a=await A(s.value);r.value=[...r.value,...a.result.items],a.result.items.length===0&&(i.value=!0)}function c(a){s.value.sortField=a,s.value.page=1,f()}return j(()=>{l(),f()}),(a,L)=>{const p=R,E=M,b=P,T=V,O=le;return h(),S("div",re,[C("div",ie,[C("div",ce,[m(E,{separator:">"},{default:v(()=>[m(p,{to:{path:"/"}},{default:v(()=>[y("首页")]),_:1}),m(p,{to:{path:`/fenlei/${g(o).parentId}`}},{default:v(()=>[y(F(g(o).parentName),1)]),_:1},8,["to"]),m(p,null,{default:v(()=>[y(F(g(o).name),1)]),_:1})]),_:1})]),m(T,{onTabChange:c},{default:v(()=>[m(b,{label:"最新商品",name:"publishTime"}),m(b,{label:"最高人气",name:"orderNum"}),m(b,{label:"评论最多",name:"evaluateNum"})]),_:1}),z((h(),S("div",{class:"suoyou","infinite-scroll-disabled":g(i)},[(h(!0),S(G,null,K(g(r),k=>(h(),Y(J,{item:k},null,8,["item"]))),256))],8,ue)),[[O,d]])])])}}},ye=X(de,[["__scopeId","data-v-c217cb9d"]]);export{ye as default};
